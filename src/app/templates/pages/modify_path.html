{% extends 'components/standard_page.html' %}
{% block content %}
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

    <form action="{% url 'add_path' %}" method="post">
        {% csrf_token %}
        {% if path %}
            <input type="hidden" name="path" value="{{ path.id }}">
        {% endif %}
        <div class="row">
            <div class="col">
                <h2>Path</h2>
                <table>
                    <tr>
                        <td><label for="name">Name: </label></td>
                        <td><input required name="name" id="name" placeholder="Path Name"></td>
                    </tr>
                    <tr>
                        <td><label for="region">Region: </label></td>
                        <td><select required class="chosen-select" name="region" id="region">
                            <option value=""></option>
                            {% for name in regions %}
                                <option value="{{ name }}">{{ name }}
                            {% endfor %}
                        </select></td>
                    </tr>
                </table>
            </div>
        </div>
        <div class="row">
            <div class="col">
                <h2>Points</h2>
                <div id="sortable" class="point-wrapper">
                    <div class="point-fieldset content-item">
                        <label for="x_pos_1">X: </label>
                        <input type="number" id="x_pos_1" name="x_pos_1">
                        <br>
                        <label for="z_pos_1">Z: </label>
                        <input type="number" id="z_pos_1" name="z_pos_1">
                        <br>
                        <button type="button" class="remove-fieldset btn btn-danger">Remove</button>
                    </div>
                </div>
                <button type="button" class="add-fieldset btn btn-primary">Add Another +</button>
            </div>
        </div>
        <div class="row">
            <input id="submit" class="btn btn-success" type="submit" value="Save">
        </div>
    </form>
    {% if path %}
        <div class="row">
            <form action="{% url 'delete_path' %}" method="post">
                {% csrf_token %}
                <input type="hidden" name="path" value="{{ path.id }}">
                <input class="btn btn-danger" type="submit" name="delete" value="Delete"
                       onclick="return confirm('Are you sure you want to delete this path?');">
            </form>
        </div>
    {% endif %}

    {% load static %}
    <script src="{% static 'scripts/modify_path.js' %}" type="text/javascript" charset="utf-8"></script>
    {% if path %}
        {{ path|json_script:"path-data" }}
        <script src="{% static 'scripts/populate_path.js' %}" type="text/javascript" charset="utf-8"></script>
    {% endif %}
    {% include 'components/chosen_scripts.html' %}


{% endblock %}
