{% extends 'components/base.html' %}
{% block content %}
    <div class="row">
        <div class="col">
            <form action="{% url 'add_location' %}" method="post">
                {% csrf_token %}
                <input type="hidden" name="location" value="{{ location.id }}">
                <table>
                    <tr>
                        <td><label for="name">Name: </label></td>
                        <td><input size="52px" name="name" id="name" value="{{ location.name }}"></td>
                    </tr>
                    <tr>
                        <td><label for="description">Description<br> <em>(Supports Markdown)</em>: </label></td>
                        <td><textarea rows="20" cols="100" name="description"
                                      id="description">{{ location.description }}</textarea>
                            <script>var editor = new Editor({element: document.getElementById("description")});
                            editor.render();</script>
                        </td>
                    </tr>
                    <tr>
                        <td><label for="x_pos">X: </label></td>
                        <td><input type="number" size="5px" name="x_pos" id="x_pos" value="{{ location.x_pos }}"></td>
                    </tr>
                    <tr>
                        <td><label for="y_pos">Y: </label></td>
                        <td><input type="number" size="5px" name="y_pos" id="y_pos" value="{{ location.y_pos }}"></td>
                    </tr>
                    <tr>
                        <td><label for="z_pos">Z: </label></td>
                        <td><input type="number" size="5px" name="z_pos" id="z_pos" value="{{ location.z_pos }}"></td>
                    </tr>
                    <tr>
                        <td><label for="region">Region: </label></td>
                        <td><select name="region" id="region">
                            <option value="{{ location.region }}" selected>{{ location.region }}</option>
                            <option value="Overworld">Overworld</option>
                            <option value="End">The End</option>
                            <option value="Nether">The Nether</option>
                            <option value="Above">The Above</option>
                            <option value="Resource-World">Resource World</option>
                            <option value="Shopping-District">Shopping District</option>
                            <option value="Entertainment-District">Entertainment District</option>
                        </select></td>
                    </tr>
                    <tr>
                        <td><input class="btn btn-success" type="submit" value="Update"></td>
                    </tr>
                </table>
            </form>
            <form action="{% url 'delete_location' %}" method="post">
                {% csrf_token %}

                <input class="btn btn-danger" type="submit" name="delete" value="Delete"
                       onclick="return confirm('Are you sure you want to delete this location?');">
                <input type="hidden" name="location" value="{{ location.id }}">
            </form>
        </div>
        <div class="col">
            <h2>Add Maintainer</h2>
            <form action="{% url 'add_maintainer' %}" method="post">
                {% csrf_token %}
                <td><label for="user">User</label></td>
                <select name="user" id="user">
                    {% for user in users %}
                        <option value="{{ user.id }}">{{ user.username }}</option>
                    {% endfor %}
                </select>
                <input type="hidden" name="location" value="{{ location.id }}">
                <td><input class="btn btn-success" type="submit" value="Add"></td>
            </form>

            <h2>Maintainers</h2>
            {% for maintainer in maintainers %}
                <form action="{% url 'delete_maintainer' %}" method="post">
                    {% csrf_token %}
                    <table>
                        <tr>
                            <td><img class="rounded-circle" alt="{{ maintainer.user.username }} avatar"
                                     src="{{ maintainer.avatar }}"></td>
                            <td>{{ maintainer.user.username }}</td>
                            <td><input class="btn btn-danger" type="submit" name="delete" value="Delete"
                                       onclick="return confirm('Are you sure you want to remove {{ maintainer.user.username }}?');">
                            </td>
                            <td><input type="hidden" name="id" value="{{ maintainer.id }}"></td>
                        </tr>
                    </table>
                    <input type="hidden" name="location" value="{{ location.id }}">
                </form>
            {% endfor %}
        </div>
    </div>
{% endblock %}
